# Arquitectura de la Solución
## Arquitectura
![architecture](../assets/ARCHITECTURE.drawio.svg)

## Lista de Servicios
1. **Bucket S3 chatbot-web:** contiene la web estática, sirve como origen para la distribución de cloudfront.
2. **Bucket S3 chatbot-web (custom):** archivos *media*, contiene los logos de la aplicación y archivos *css* para la personalización.
3. **Bucket S3 uploaded-files:** almacena los documentos que conforman la base de conocimientos del *chatbot* en su formato original.
4. **Bucket S3 terraform-iac:** contiene el archivo de historial de cambios del despliegue en la aplicación, es un bucket **crítico** que no debe ser eliminado ni manipulado bajo ningún concepto.
5. **CloudFront Distribution:** CDN utilizado para distribuir el contenido web alrededor del mundo.
7. **API Gateway HTTP:** gestión de APIs integradas con functiones lambda.
12. **VPC Link:** integración privada de rutas API HTTP a recursos privados del backend de la solución.
8. **Lambda Authorizer Function:** función lambda de autorización a las distintas APIs, comprueba el token de sesión.
9. **Lambda Functions:** funciones lambda habilitadas para APIs, además del procesamiento de documentos e interacción con los servicios de S3, RDS y DynamoDB.
10. **DynamboDB Tables:** registro de documentos cargados, historial de conversaciones y tópicos.
11. **Cognito UserPool:** sistema de gestión de usuarios y grupos de usuarios registrados en la aplicación.
13. **ECS Cluster:** servicios habilitados para la funcionalidad de la aplicación (backend y bot de whatsapp) soportados por instancias EC2.
14. **Application Load balancer:** balanceador de carga para instancias EC2 de la aplicación.
15. **EC2 Instances:** instancias asociadas a los servicios en ECS para el backend de la aplicación y el bot de whatsapp.
16. **RDS Instance:** base de datos relacional para almacenar la base de conocimientos vectorial de los documentos procesados.
17. **Route 53:** gestión del dominio de la aplicación, registros asociados con servicios como cloudfront o load balancers.
18. **Certificate Manager:** gestión del certificado SSL para el dominio y subdominios de la aplicación.
19. **Amazon Bedrock:** acceso a modelos de IA populares, se requiere solicitar acceso estos modelos.